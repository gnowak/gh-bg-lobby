(this.webpackJsonpfirelobby=this.webpackJsonpfirelobby||[]).push([[1],{16:function(e,t,a){e.exports=a(24)},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);a(17);var n={apiKey:"AIzaSyDOle-RNrnsvANY1-QSkq033BK5e3Evpsg",authDomain:"reactfire-lobby.firebaseapp.com",projectId:"reactfire-lobby",storageBucket:"reactfire-lobby.appspot.com",messagingSenderId:"754277137576",appId:"1:754277137576:web:b00a20cb1f0d8cf871d69d",measurementId:"G-F7EC6E8VVR"},r=a(0),c=a.n(r),i=a(11),l=a(2),s=a(3),o=a.n(s),m=a(4),u=a(6),d=a.n(u);function b(){var e=Object(l.i)(),t=function(){var t=Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signInWithPopup(new d.a.auth.GoogleAuthProvider);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(m.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signOut();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(l.a,{fallback:c.a.createElement("button",{className:"button is-primary",onClick:t},"Sign In")},c.a.createElement("button",{className:"button is-info",onClick:a},"Sign Out"))}function f(){return c.a.createElement("nav",{className:"navbar is-flex-touch is-flex-desktop is-justify-content-space-between\t"},c.a.createElement("div",{className:"navbar-brand is-flex-shrink-1"},"Fire Lobby",c.a.createElement("span",{role:"img","aria-label":"Fire Emoji"},"\ud83d\udd25")),c.a.createElement("div",{className:"navbar-menu is-flex-shrink-1 is-active"},c.a.createElement("div",{className:"navbar-start"}),c.a.createElement("div",{className:"navbar-end"},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("div",{className:"buttons"},c.a.createElement(b,null))))))}function p(){Object(l.m)().uid;var e=Object(l.j)().collection("games"),t=Object(l.j)().collection("lobby"),a=(Object(l.j)().collection("vote"),Object(l.k)(t)),n=Object(l.k)(e),r=(l.j.FieldValue.delete(),a.map((function(e){return e.suggestion})).filter(Boolean)),i=r.filter((function(e,t,a){return a.indexOf(e)===t})),s=r.reduce((function(e,t){return t in e?e[t]++:e[t]=1,e}),{}),u=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.get().then((function(e){return Promise.all(e.docs.map((function(e){return e.ref.update({suggestion:""})})))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"container is-fluid box"},c.a.createElement("div",{className:"tile is-ancestor "},c.a.createElement("div",{className:"tile is-parent has-background-info notification is-vertical is-text-centered columns is-centered"},c.a.createElement("h3",{className:"title has-text-white mx-auto"},"Suggested Games"),c.a.createElement("div",{className:"columns is-centered is-3 is-multiline"},i.map((function(e){return c.a.createElement("div",{className:"column is-one-quarter ",key:e},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement("figure",{className:"image is-4by3"},c.a.createElement("img",{alt:e,src:n.find((function(t){return t.name===e})).thumbnail+"?random="+Math.floor(100*Math.random()),onError:function(e){e.target.onError=null,e.target.src="https://picsum.photos/165/150?random="+Math.floor(100*Math.random())}}))),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"content"},c.a.createElement("p",null,c.a.createElement("strong",null,e," currently has ",s[e]," votes"))))))}))),c.a.createElement("div",{className:"tile "},c.a.createElement("button",{className:"button",onClick:u},"Reset All Votes")))))}a(23);function v(e){var t=e.game,a=Object(l.m)(),n=(a.email,a.uid),r=Object(l.j)().collection("games"),i=Object(l.j)().collection("lobby"),s=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.doc(n).set({suggestion:t.name},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.doc(t.name).delete();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"column is-one-quarter-desktop is-one-third-tablet is-half-mobile is-clipped"},c.a.createElement("div",{id:t.name.replace(/\s+/g,"-").toLowerCase(),className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement("figure",{className:"image is-4by3"},c.a.createElement("img",{src:t.thumbnail+"?random="+Math.floor(100*Math.random()),alt:t.name+" thumbnail",onError:function(e){e.target.onError=null,e.target.src="https://picsum.photos/165/150?random="+Math.floor(100*Math.random())}}),c.a.createElement("div",{id:"delete-overlay",className:"columns is-mobile is-vcentered is-hidden is-overlay is-centered"},c.a.createElement("div",{className:"column is-narrow"},c.a.createElement("button",{className:"button",onClick:u},"Delete"))))),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"media"},c.a.createElement("div",{className:"media-content"},c.a.createElement("p",{className:"title is-4 is-size-5-mobile"},t.name)))),c.a.createElement("footer",{className:"card-footer"},c.a.createElement("button",{className:"button card-footer-item",onClick:s},"Suggest"),c.a.createElement("button",{className:"button card-footer-item",onClick:function(e){e.preventDefault();var a=document.querySelector("#"+t.name.replace(/\s+/g,"-").toLowerCase()+" #delete-overlay").classList;a.contains("is-hidden")?(a.remove("is-hidden"),e.target.innerHTML="Cancel"):(a.add("is-hidden"),e.target.innerHTML="Delete")}},"Delete"))))}var E=a(12);function N(){var e=Object(l.j)().collection("games"),t=Object(l.k)(e),a=function(){var a=Object(m.a)(o.a.mark((function a(n){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),console.log("You have submitted the form."),r={name:n.target.name.value,thumbnail:n.target.thumbnail.value},!t.find((function(e){return e.name===r.name}))){a.next=7;break}alert("Game already exists"),a.next=9;break;case 7:return a.next=9,e.doc(r.name).set({name:r.name,thumbnail:r.thumbnail});case 9:document.getElementById("add-game").reset();case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement("div",{className:"column card is-one-quarter-desktop is-half-mobile is-onethird-tablet"},c.a.createElement("div",{className:"columns  is-mobile is-centered is-vcentered is-multiline is-flex-direction-column mt-6"},c.a.createElement("div",{className:"card-image"},c.a.createElement("figure",{className:"image "},c.a.createElement(E.a,{size:"5em",className:""}))),c.a.createElement("div",{className:"columns is-mobile card-content is-vcentered is-centered is-multiline"},c.a.createElement("div",{className:"media"},c.a.createElement("div",{className:"media-content"},c.a.createElement("form",{id:"add-game",onSubmit:a,className:"box"},c.a.createElement("p",{className:"title is-4"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Game Name"})),c.a.createElement("p",{className:"subtitle is-6"},c.a.createElement("input",{type:"text",name:"thumbnail",placeholder:"Thumbnail URL"})),c.a.createElement("div",{className:"columns block is-mobile is-centered is-vcentered "},c.a.createElement("button",{className:"button is-primary",type:"submit"},"Add Game"))))))))}function h(){var e=Object(l.j)().collection("games"),t=Object(l.k)(e);return c.a.createElement("section",{className:"container my-3"},c.a.createElement("h3",{className:"block is-size-3 is-underlined"},"Game Collection"),c.a.createElement("div",{className:"container my-3"},c.a.createElement("div",{className:"columns is-multiline is-mobile is-variable is-1-mobile"},t.map((function(e){return c.a.createElement(v,{key:e.name,game:e})})),c.a.createElement(N,null))))}function g(){var e=Object(l.m)(),t=e.email,a=e.displayName,n=e.uid,r=Object(l.j)().collection("lobby"),i=Object(l.k)(r),s=i.find((function(e){return e.email===t})),u=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.doc(n).set({email:t,displayName:a,ready:!1});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.doc(n).delete();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.doc(n).set({ready:t},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"container is-fluid"},i.map((function(e){return c.a.createElement("article",{key:e.email,className:"tile is-child notification"},c.a.createElement("p",{className:"title"},e.displayName," - ",e.ready?"Ready \ud83c\udfae":"Not Ready \u274c"),c.a.createElement("p",null,e.suggestion?"Suggestion: "+e.suggestion:""))})),c.a.createElement("div",{className:"columns is-4"},s&&c.a.createElement("div",{className:"column is-1 mr-4"},c.a.createElement("button",{className:"button is-primary",onClick:function(){return b(!s.ready)}},s.ready?"Not Ready!":"Ready!")),c.a.createElement("div",{className:"column is-1"},s?c.a.createElement("button",{className:"button is-primary",onClick:d},"Leave"):c.a.createElement("button",{className:"button is-primary",onClick:u},"Join"))),s&&c.a.createElement(p,null),s&&c.a.createElement(h,null))}function y(){return c.a.createElement(l.b,{firebaseConfig:n,traceId:"loading-app-status"},c.a.createElement(l.c,{fallback:c.a.createElement("p",null,"Loading...")},c.a.createElement(f,null),c.a.createElement(l.a,{fallback:c.a.createElement("p",null,"Not Logged In...")},c.a.createElement(g,null))))}Object(i.unstable_createRoot)(document.getElementById("root")).render(c.a.createElement(y,null))}},[[16,2,3]]]);
//# sourceMappingURL=main.0f2c6674.chunk.js.map